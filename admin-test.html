<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin æƒé™ç³»ç»Ÿæµ‹è¯• | JJConnect</title>
<style>
:root {
    --primary: #2B6CB0;
    --secondary: #215387;
    --success: #48BB78;
    --danger: #E53E3E;
    --warning: #FFC107;
    --dark: #1A202C;
    --light: #F7FAFC;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    padding: 2rem;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
}

.header {
    text-align: center;
    color: white;
    margin-bottom: 3rem;
}

.header h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
}

.header p {
    font-size: 1.1rem;
    opacity: 0.9;
}

.test-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
}

.test-card {
    background: white;
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

.test-card h2 {
    color: var(--dark);
    margin-bottom: 1rem;
    font-size: 1.5rem;
}

.test-card p {
    color: #666;
    margin-bottom: 1.5rem;
    line-height: 1.6;
}

.role-selector {
    margin-bottom: 1.5rem;
}

.role-selector label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: var(--dark);
}

.role-selector select {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
}

.btn {
    display: inline-block;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.3s ease;
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--secondary);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(43, 108, 176, 0.3);
}

.btn-success {
    background: var(--success);
    color: white;
}

.btn-block {
    display: block;
    width: 100%;
    text-align: center;
}

.permission-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
}

.permission-table th,
.permission-table td {
    padding: 0.75rem;
    text-align: left;
    border-bottom: 1px solid #e2e8f0;
}

.permission-table th {
    background: var(--light);
    font-weight: 600;
    color: var(--dark);
}

.permission-table td {
    color: #666;
}

.check {
    color: var(--success);
    font-weight: bold;
}

.cross {
    color: var(--danger);
    font-weight: bold;
}

.info-box {
    background: #EBF8FF;
    border-left: 4px solid var(--primary);
    padding: 1rem;
    border-radius: 8px;
    margin-top: 1.5rem;
}

.info-box h3 {
    color: var(--primary);
    margin-bottom: 0.5rem;
    font-size: 1rem;
}

.info-box p {
    color: #2C5282;
    font-size: 0.9rem;
    margin: 0;
}

.feature-list {
    list-style: none;
    margin-top: 1rem;
}

.feature-list li {
    padding: 0.5rem 0;
    padding-left: 1.5rem;
    position: relative;
    color: #666;
}

.feature-list li:before {
    content: "âœ“";
    position: absolute;
    left: 0;
    color: var(--success);
    font-weight: bold;
}

.code-block {
    background: #2D3748;
    color: #E2E8F0;
    padding: 1rem;
    border-radius: 8px;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    overflow-x: auto;
    margin-top: 1rem;
}

@media (max-width: 768px) {
    .header h1 {
        font-size: 2rem;
    }
    
    .test-grid {
        grid-template-columns: 1fr;
    }
}
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>ğŸ” Admin æƒé™ç³»ç»Ÿæµ‹è¯•</h1>
        <p>æµ‹è¯•ä¸åŒç”¨æˆ·è§’è‰²çš„æƒé™æ§åˆ¶æ•ˆæœ</p>
    </div>
    
    <div class="test-grid">
        <!-- Quick Test Card -->
        <div class="test-card">
            <h2>ğŸš€ å¿«é€Ÿæµ‹è¯•</h2>
            <p>é€‰æ‹©ä¸€ä¸ªè§’è‰²ï¼Œç„¶åæ‰“å¼€ Admin Dashboard æŸ¥çœ‹æ•ˆæœ</p>
            
            <div class="role-selector">
                <label for="test-role">é€‰æ‹©æµ‹è¯•è§’è‰²:</label>
                <select id="test-role">
                    <option value="2">ç®¡ç†å‘˜ (Admin) - å®Œå…¨æƒé™</option>
                    <option value="1">ç¼–è¾‘è€… (Editor) - éƒ¨åˆ†æƒé™</option>
                    <option value="0">è®¿å®¢ (Viewer) - åªè¯»æƒé™</option>
                </select>
            </div>
            
            <a href="admin.html" class="btn btn-primary btn-block" target="_blank">
                æ‰“å¼€ Admin Dashboard
            </a>
            
            <div class="info-box">
                <h3>ğŸ’¡ æç¤º</h3>
                <p>æ‰“å¼€ Admin Dashboard åï¼Œä½¿ç”¨å³ä¸‹è§’çš„è°ƒè¯•é¢æ¿å¯ä»¥åŠ¨æ€åˆ‡æ¢è§’è‰²</p>
            </div>
        </div>
        
        <!-- Permission Matrix Card -->
        <div class="test-card">
            <h2>ğŸ“‹ æƒé™çŸ©é˜µ</h2>
            <p>å„è§’è‰²çš„è¯¦ç»†æƒé™å¯¹ç…§è¡¨</p>
            
            <table class="permission-table">
                <thead>
                    <tr>
                        <th>åŠŸèƒ½</th>
                        <th>Viewer</th>
                        <th>Editor</th>
                        <th>Admin</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>æŸ¥çœ‹å†…å®¹</td>
                        <td class="check">âœ“</td>
                        <td class="check">âœ“</td>
                        <td class="check">âœ“</td>
                    </tr>
                    <tr>
                        <td>ç¼–è¾‘å†…å®¹</td>
                        <td class="cross">âœ—</td>
                        <td class="check">âœ“</td>
                        <td class="check">âœ“</td>
                    </tr>
                    <tr>
                        <td>åˆ é™¤å†…å®¹</td>
                        <td class="cross">âœ—</td>
                        <td class="cross">âœ—</td>
                        <td class="check">âœ“</td>
                    </tr>
                    <tr>
                        <td>ç¼–è¾‘ç”¨æˆ·</td>
                        <td class="cross">âœ—</td>
                        <td class="check">âœ“</td>
                        <td class="check">âœ“</td>
                    </tr>
                    <tr>
                        <td>åˆ é™¤ç”¨æˆ·</td>
                        <td class="cross">âœ—</td>
                        <td class="cross">âœ—</td>
                        <td class="check">âœ“</td>
                    </tr>
                    <tr>
                        <td>ç³»ç»Ÿè®¾ç½®</td>
                        <td class="cross">âœ—</td>
                        <td class="cross">âœ—</td>
                        <td class="check">âœ“</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Features Card -->
        <div class="test-card">
            <h2>âœ¨ ç³»ç»Ÿç‰¹æ€§</h2>
            <p>æƒé™æ§åˆ¶ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½</p>
            
            <ul class="feature-list">
                <li>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)</li>
                <li>åŠ¨æ€ UI æ˜¾ç¤º/éšè—</li>
                <li>å®æ—¶æƒé™æ£€æŸ¥</li>
                <li>Cloudflare Workers é›†æˆæ¥å£</li>
                <li>å¼€å‘è€…è°ƒè¯•é¢æ¿</li>
                <li>è¯¦ç»†çš„æƒé™æç¤ºä¿¡æ¯</li>
            </ul>
            
            <div class="info-box">
                <h3>ğŸ”§ å¼€å‘æ¨¡å¼</h3>
                <p>åœ¨ admin.html ä¸­ä¿®æ”¹ userRole å˜é‡ (0-2) æ¥æµ‹è¯•ä¸åŒæƒé™</p>
            </div>
        </div>
        
        <!-- Integration Card -->
        <div class="test-card">
            <h2>ğŸ”Œ Cloudflare Workers é›†æˆ</h2>
            <p>åç«¯è®¤è¯ API ç¤ºä¾‹</p>
            
            <div class="code-block">
// Cloudflare Workers å“åº”æ ¼å¼
{
  "authenticated": true,
  "role": 2,
  "username": "admin_user",
  "email": "admin@jjconnect.jp"
}
            </div>
            
            <p style="margin-top: 1rem; font-size: 0.9rem;">
                åœ¨ admin.html çš„ <code>checkAuth()</code> å‡½æ•°ä¸­å–æ¶ˆæ³¨é‡Š fetch ä»£ç å³å¯é›†æˆ
            </p>
        </div>
        
        <!-- Documentation Card -->
        <div class="test-card">
            <h2>ğŸ“š æ–‡æ¡£</h2>
            <p>æŸ¥çœ‹å®Œæ•´çš„æƒé™ç³»ç»Ÿæ–‡æ¡£</p>
            
            <a href="ADMIN_PERMISSIONS_README.md" class="btn btn-success btn-block" target="_blank">
                æŸ¥çœ‹å®Œæ•´æ–‡æ¡£
            </a>
            
            <div class="info-box" style="margin-top: 1.5rem;">
                <h3>ğŸ“– æ–‡æ¡£å†…å®¹</h3>
                <p>åŒ…å«æƒé™çŸ©é˜µã€API æ–‡æ¡£ã€é›†æˆæŒ‡å—ã€å®‰å…¨å»ºè®®ç­‰</p>
            </div>
        </div>
        
        <!-- Test Scenarios Card -->
        <div class="test-card">
            <h2>ğŸ§ª æµ‹è¯•åœºæ™¯</h2>
            <p>æ¨èçš„æµ‹è¯•æµç¨‹</p>
            
            <ol style="padding-left: 1.5rem; color: #666; line-height: 1.8;">
                <li>ä»¥ <strong>Admin</strong> è§’è‰²ç™»å½•ï¼Œæµ‹è¯•æ‰€æœ‰åŠŸèƒ½</li>
                <li>åˆ‡æ¢åˆ° <strong>Editor</strong>ï¼ŒéªŒè¯åˆ é™¤æŒ‰é’®è¢«éšè—</li>
                <li>åˆ‡æ¢åˆ° <strong>Viewer</strong>ï¼Œç¡®è®¤åªèƒ½æŸ¥çœ‹</li>
                <li>å°è¯•ç‚¹å‡»è¢«ç¦ç”¨çš„æŒ‰é’®ï¼ŒæŸ¥çœ‹æƒé™æç¤º</li>
                <li>æ£€æŸ¥ç³»ç»Ÿè®¾ç½®é¡µé¢çš„è®¿é—®æ§åˆ¶</li>
            </ol>
        </div>
    </div>
</div>

<script>
// Store selected role in localStorage
document.getElementById('test-role').addEventListener('change', function() {
    localStorage.setItem('testUserRole', this.value);
});

// Load saved role on page load
window.addEventListener('load', function() {
    const savedRole = localStorage.getItem('testUserRole');
    if (savedRole) {
        document.getElementById('test-role').value = savedRole;
    }
});

// Update admin.html link with role parameter
document.querySelector('a[href="admin.html"]').addEventListener('click', function(e) {
    const role = document.getElementById('test-role').value;
    localStorage.setItem('testUserRole', role);
});
</script>
</body>
</html>
