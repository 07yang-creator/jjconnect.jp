<!doctype html>
<html lang="en-US" class="no-js" itemtype="https://schema.org/WebPage" itemscope>
<head>
<!-- wexal_pst_init.js does not exist -->
<!-- engagement_delay.js does not exist -->
<link rel="dns-prefetch" href="https://fonts.googleapis.com/">
<link rel="preconnect" href="https://fonts.googleapis.com/">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<title>Login | JJConnect</title>
<meta name="description" content="Login to your JJConnect account to access exclusive services and features.">
<link rel="stylesheet" href="navbar.css">
<style id='kadence-blocks-advancedheading-inline-css'>
.wp-block-kadence-advancedheading mark{background:transparent;border-style:solid;border-width:0}.wp-block-kadence-advancedheading mark.kt-highlight{color:#f76a0c;}.kb-adv-heading-icon{display: inline-flex;justify-content: center;align-items: center;} .is-layout-constrained > .kb-advanced-heading-link {display: block;}.single-content .kadence-advanced-heading-wrapper h1, .single-content .kadence-advanced-heading-wrapper h2, .single-content .kadence-advanced-heading-wrapper h3, .single-content .kadence-advanced-heading-wrapper h4, .single-content .kadence-advanced-heading-wrapper h5, .single-content .kadence-advanced-heading-wrapper h6 {margin: 1.5em 0 .5em;}.single-content .kadence-advanced-heading-wrapper+* { margin-top:0;}.kb-screen-reader-text{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);}
/*# sourceURL=kadence-blocks-advancedheading-inline-css */
</style>
<meta name='robots' content='max-image-preview:large'/>
<script>document.documentElement.classList.remove( 'no-js' );</script>
<link rel='stylesheet' id='kadence-global-css' href='wp-content/themes/kadence/assets/css/global.min.css%3Fver=1.3.2.css' media='all'/>
<style id='kadence-global-inline-css'>
/* Kadence Base CSS */
:root{--global-palette1:#2B6CB0;--global-palette2:#215387;--global-palette3:#1A202C;--global-palette4:#2D3748;--global-palette5:#4A5568;--global-palette6:#718096;--global-palette7:#EDF2F7;--global-palette8:#F7FAFC;--global-palette9:#ffffff;--global-palette9rgb:255, 255, 255;--global-palette-highlight:var(--global-palette1);--global-palette-highlight-alt:var(--global-palette2);--global-palette-highlight-alt2:var(--global-palette9);--global-palette-btn-bg:var(--global-palette1);--global-palette-btn-bg-hover:var(--global-palette2);--global-palette-btn:var(--global-palette9);--global-palette-btn-hover:var(--global-palette9);--global-body-font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--global-heading-font-family:inherit;--global-primary-nav-font-family:Saira, sans-serif;--global-fallback-font:sans-serif;--global-display-fallback-font:sans-serif;--global-content-width:1290px;--global-content-wide-width:calc(1290px + 230px);--global-content-narrow-width:842px;--global-content-edge-padding:1.5rem;--global-content-boxed-padding:2rem;--global-calc-content-width:calc(1290px - var(--global-content-edge-padding) - var(--global-content-edge-padding) );--wp--style--global--content-size:var(--global-calc-content-width);}.wp-site-blocks{--global-vw:calc( 100vw - ( 0.5 * var(--scrollbar-offset)));}body{background:var(--global-palette8);}body, input, select, optgroup, textarea{font-weight:400;font-size:17px;line-height:1.6;font-family:var(--global-body-font-family);color:var(--global-palette4);}.content-bg, body.content-style-unboxed .site{background:var(--global-palette9);}h1,h2,h3,h4,h5,h6{font-family:var(--global-heading-font-family);}h1{font-weight:700;font-size:32px;line-height:1.5;color:var(--global-palette3);}h2{font-weight:700;font-size:28px;line-height:1.5;color:var(--global-palette3);}h3{font-weight:700;font-size:24px;line-height:1.5;color:var(--global-palette3);}h4{font-weight:700;font-size:22px;line-height:1.5;color:var(--global-palette4);}h5{font-weight:700;font-size:20px;line-height:1.5;color:var(--global-palette4);}h6{font-weight:700;font-size:18px;line-height:1.5;color:var(--global-palette5);}.site-container, .site-header-row-layout-contained, .site-footer-row-layout-contained, .entry-hero-layout-contained, .comments-area, .alignfull > .wp-block-cover__inner-container, .alignwide > .wp-block-cover__inner-container{max-width:var(--global-content-width);}.content-area{margin-top:5rem;margin-bottom:5rem;}@media all and (max-width: 1024px){.content-area{margin-top:3rem;margin-bottom:3rem;}}@media all and (max-width: 767px){.content-area{margin-top:2rem;margin-bottom:2rem;}}@media all and (max-width: 1024px){:root{--global-content-boxed-padding:2rem;}}@media all and (max-width: 767px){:root{--global-content-boxed-padding:1.5rem;}}.entry-content-wrap{padding:2rem;}@media all and (max-width: 1024px){.entry-content-wrap{padding:2rem;}}@media all and (max-width: 767px){.entry-content-wrap{padding:1.5rem;}}.entry.single-entry{box-shadow:0px 15px 15px -10px rgba(0,0,0,0.05);}.entry.loop-entry{box-shadow:0px 15px 15px -10px rgba(0,0,0,0.05);}button, .button, .wp-block-button__link, input[type="button"], input[type="reset"], input[type="submit"]{box-shadow:0px 0px 0px -7px rgba(0,0,0,0);}button:hover, button:focus, button:active, .button:hover, .button:focus, .button:active, .wp-block-button__link:hover, .wp-block-button__link:focus, .wp-block-button__link:active, input[type="button"]:hover, input[type="button"]:focus, input[type="button"]:active, input[type="reset"]:hover, input[type="reset"]:focus, input[type="reset"]:active, input[type="submit"]:hover, input[type="submit"]:focus, input[type="submit"]:active{box-shadow:0px 15px 25px -7px rgba(0,0,0,0.1);}
/*# sourceURL=kadence-global-inline-css */
</style>
<link rel='stylesheet' id='kadence-content-css' href='wp-content/themes/kadence/assets/css/content.min.css%3Fver=1.3.2.css' media='all'/>
<style id='login-custom-styles'>
/* Login Page Custom Styles */
.login-container {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 2rem;
    background: linear-gradient(135deg, var(--global-palette8) 0%, var(--global-palette7) 100%);
}

.login-box {
    background: var(--global-palette9);
    border-radius: 12px;
    box-shadow: 0px 15px 35px -10px rgba(0,0,0,0.1);
    padding: 3rem;
    width: 100%;
    max-width: 480px;
}

.auth-tabs {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    border-bottom: 2px solid var(--global-palette7);
}

.auth-tab {
    flex: 1;
    padding: 1rem;
    background: transparent;
    border: none;
    color: var(--global-palette5);
    font-weight: 600;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    border-bottom: 3px solid transparent;
    margin-bottom: -2px;
}

.auth-tab:hover {
    color: var(--global-palette3);
}

.auth-tab.active {
    color: var(--global-palette1);
    border-bottom-color: var(--global-palette1);
}

.login-header {
    text-align: center;
    margin-bottom: 2rem;
}

.login-header h1 {
    font-size: 28px;
    font-weight: 700;
    color: var(--global-palette3);
    margin-bottom: 0.5rem;
}

.login-header p {
    color: var(--global-palette5);
    font-size: 15px;
    margin: 0;
}

.auth-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.auth-form.hidden {
    display: none;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-group.full-width {
    grid-column: 1 / -1;
}

.form-group label {
    font-weight: 600;
    font-size: 14px;
    color: var(--global-palette4);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.form-group label .required {
    color: #E53E3E;
    margin-left: 2px;
}

.form-group input,
.form-group select {
    padding: 0.875rem 1rem;
    border: 2px solid var(--global-palette7);
    border-radius: 8px;
    font-size: 16px;
    font-family: var(--global-body-font-family);
    color: var(--global-palette3);
    background: var(--global-palette9);
    transition: all 0.3s ease;
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    border-color: var(--global-palette1);
    box-shadow: 0 0 0 3px rgba(43, 108, 176, 0.1);
}

.form-group input::placeholder {
    color: var(--global-palette6);
}

.login-button {
    padding: 1rem;
    background: var(--global-palette-btn-bg);
    color: var(--global-palette-btn);
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0px 4px 12px rgba(43, 108, 176, 0.2);
}

.login-button:hover {
    background: var(--global-palette-btn-bg-hover);
    box-shadow: 0px 8px 20px rgba(43, 108, 176, 0.3);
    transform: translateY(-2px);
}

.login-button:active {
    transform: translateY(0);
}

.form-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 1rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.remember-me {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.remember-me input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--global-palette1);
}

.remember-me label {
    font-size: 14px;
    color: var(--global-palette4);
    cursor: pointer;
    margin: 0;
}

.forgot-password {
    font-size: 14px;
    color: var(--global-palette1);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
}

.forgot-password:hover {
    color: var(--global-palette2);
    text-decoration: underline;
}

.back-home {
    text-align: center;
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid var(--global-palette7);
}

.back-home a {
    color: var(--global-palette5);
    text-decoration: none;
    font-size: 14px;
    transition: color 0.3s ease;
}

.back-home a:hover {
    color: var(--global-palette1);
}

@media all and (max-width: 767px) {
    .login-box {
        padding: 2rem;
    }
    
    .login-header h1 {
        font-size: 24px;
    }
    
    .form-footer {
        flex-direction: column;
        align-items: flex-start;
    }
}
</style>
</head>
<body class="login-page">
<script src="navbar.js"></script>
<style>
/* Hide any existing headers */
#masthead, #mobile-header {
    display: none !important;
}
</style>
<div class="login-container">
    <div class="login-box">
        <!-- Auth Tabs -->
        <div class="auth-tabs">
            <button class="auth-tab active" data-tab="login">Login</button>
            <button class="auth-tab" data-tab="register">Register</button>
        </div>
        
        <!-- Login Form -->
        <form id="login-form" class="auth-form" action="#" method="POST">
            <div class="login-header">
                <h1>Welcome Back</h1>
                <p>Login to your JJConnect account</p>
            </div>
            
            <div class="form-group">
                <label for="login-username">Username or Email</label>
                <input 
                    type="text" 
                    id="login-username" 
                    name="username" 
                    placeholder="Enter your username or email"
                    required
                    autocomplete="username"
                >
            </div>
            
            <div class="form-group">
                <label for="login-password">Password</label>
                <input 
                    type="password" 
                    id="login-password" 
                    name="password" 
                    placeholder="Enter your password"
                    required
                    autocomplete="current-password"
                >
            </div>
            
            <div class="form-footer">
                <div class="remember-me">
                    <input 
                        type="checkbox" 
                        id="remember" 
                        name="remember"
                    >
                    <label for="remember">Remember me</label>
                </div>
                <a href="#" class="forgot-password">Forgot Password?</a>
            </div>
            
            <button type="submit" class="login-button">Login</button>
        </form>
        
        <!-- Register Form -->
        <form id="register-form" class="auth-form hidden" action="#" method="POST">
            <div class="login-header">
                <h1>Create Account</h1>
                <p>Join JJConnect today</p>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="reg-firstname">First Name <span class="required">*</span></label>
                    <input 
                        type="text" 
                        id="reg-firstname" 
                        name="firstname" 
                        placeholder="John"
                        required
                        autocomplete="given-name"
                    >
                </div>
                
                <div class="form-group">
                    <label for="reg-lastname">Last Name <span class="required">*</span></label>
                    <input 
                        type="text" 
                        id="reg-lastname" 
                        name="lastname" 
                        placeholder="Doe"
                        required
                        autocomplete="family-name"
                    >
                </div>
            </div>
            
            <div class="form-group full-width">
                <label for="reg-username">Username <span class="required">*</span></label>
                <input 
                    type="text" 
                    id="reg-username" 
                    name="username" 
                    placeholder="Choose a username"
                    required
                    autocomplete="username"
                    pattern="[a-zA-Z0-9_]{3,20}"
                    title="Username must be 3-20 characters, letters, numbers, and underscores only"
                >
            </div>
            
            <div class="form-group full-width">
                <label for="reg-email">Email <span class="required">*</span></label>
                <input 
                    type="email" 
                    id="reg-email" 
                    name="email" 
                    placeholder="your.email@example.com"
                    required
                    autocomplete="email"
                >
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="reg-password">Password <span class="required">*</span></label>
                    <input 
                        type="password" 
                        id="reg-password" 
                        name="password" 
                        placeholder="Min. 8 characters"
                        required
                        autocomplete="new-password"
                        minlength="8"
                    >
                </div>
                
                <div class="form-group">
                    <label for="reg-confirm-password">Confirm <span class="required">*</span></label>
                    <input 
                        type="password" 
                        id="reg-confirm-password" 
                        name="confirm_password" 
                        placeholder="Repeat password"
                        required
                        autocomplete="new-password"
                        minlength="8"
                    >
                </div>
            </div>
            
            <div class="form-group full-width">
                <label for="reg-role">Account Type</label>
                <select id="reg-role" name="role">
                    <option value="0">Viewer (Basic Access)</option>
                    <option value="1">Editor (Create & Edit Content)</option>
                </select>
            </div>
            
            <div class="form-footer">
                <div class="remember-me">
                    <input 
                        type="checkbox" 
                        id="terms" 
                        name="terms"
                        required
                    >
                    <label for="terms">I agree to the Terms & Conditions</label>
                </div>
            </div>
            
            <button type="submit" class="login-button">Create Account</button>
        </form>
        
        <div class="back-home">
            <a href="index.html">‚Üê Back to Home</a>
        </div>
    </div>
</div>

<script>
// ============================================
// Configuration
// ============================================

// Cloudflare Worker API endpoint
// Development: Use wrangler dev local address
// Production: Replace with your Worker URL
const API_ENDPOINT = 'http://localhost:8787'; // Local development
// const API_ENDPOINT = 'https://jjconnect-auth-worker.your-subdomain.workers.dev'; // Production

// ============================================
// Tab Switching
// ============================================

document.querySelectorAll('.auth-tab').forEach(tab => {
    tab.addEventListener('click', function() {
        const targetTab = this.dataset.tab;
        
        // Update active tab
        document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        
        // Show corresponding form
        document.querySelectorAll('.auth-form').forEach(form => {
            form.classList.add('hidden');
        });
        
        const targetForm = targetTab === 'login' ? 
            document.getElementById('login-form') : 
            document.getElementById('register-form');
        targetForm.classList.remove('hidden');
    });
});

// ============================================
// Login Handler
// ============================================

document.getElementById('login-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const username = document.getElementById('login-username').value.trim();
    const password = document.getElementById('login-password').value.trim();
    const remember = document.getElementById('remember').checked;
    
    // Validate input
    if (!username || !password) {
        showMessage('Please fill in username and password', 'error');
        return;
    }
    
    // Disable submit button
    const submitBtn = this.querySelector('.login-button');
    const originalText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = 'Logging in...';
    
    try {
        // Call login API
        const response = await fetch(`${API_ENDPOINT}/api/login`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                username: username,
                password: password
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            // Store token
            if (remember) {
                localStorage.setItem('auth_token', data.token);
            } else {
                sessionStorage.setItem('auth_token', data.token);
            }
            
            // Store user info
            localStorage.setItem('user_info', JSON.stringify(data.user));
            
            // Show success message
            showMessage('Login successful! Redirecting...', 'success');
            
            console.log('Login successful:', data.user);
            
            // Redirect to admin dashboard
            setTimeout(() => {
                window.location.href = 'admin.html';
            }, 1000);
            
        } else {
            // Show error message
            showMessage(data.error || 'Login failed, please try again', 'error');
            submitBtn.disabled = false;
            submitBtn.textContent = originalText;
        }
        
    } catch (error) {
        console.error('Login error:', error);
        showMessage('Network error, please check if Worker is running', 'error');
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
    }
});

// ============================================
// Register Handler
// ============================================

document.getElementById('register-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const firstname = document.getElementById('reg-firstname').value.trim();
    const lastname = document.getElementById('reg-lastname').value.trim();
    const username = document.getElementById('reg-username').value.trim();
    const email = document.getElementById('reg-email').value.trim();
    const password = document.getElementById('reg-password').value;
    const confirmPassword = document.getElementById('reg-confirm-password').value;
    const role = document.getElementById('reg-role').value;
    const termsAccepted = document.getElementById('terms').checked;
    
    // Validate input
    if (!firstname || !lastname || !username || !email || !password) {
        showMessage('Please fill in all required fields', 'error');
        return;
    }
    
    if (password !== confirmPassword) {
        showMessage('Password confirmation does not match', 'error');
        return;
    }
    
    if (password.length < 8) {
        showMessage('Password must be at least 8 characters', 'error');
        return;
    }
    
    if (!termsAccepted) {
        showMessage('Please accept the terms of service', 'error');
        return;
    }
    
    // Disable submit button
    const submitBtn = this.querySelector('.login-button');
    const originalText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = 'Creating Account...';
    
    try {
        // Call register API
        const response = await fetch(`${API_ENDPOINT}/api/register`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                firstname: firstname,
                lastname: lastname,
                username: username,
                email: email,
                password: password,
                role: parseInt(role)
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            // Show success message
            showMessage('Ê≥®ÂÜåÊàêÂäüÔºÅÊ≠£Âú®Ëá™Âä®ÁôªÂΩï...', 'success');
            
            console.log('Registration successful:', data.user);
            
            // Auto login after registration
            if (data.token) {
                localStorage.setItem('auth_token', data.token);
                localStorage.setItem('user_info', JSON.stringify(data.user));
                
                // Redirect to admin dashboard
                setTimeout(() => {
                    window.location.href = 'admin.html';
                }, 1500);
            } else {
                // Switch to login tab
                setTimeout(() => {
                    document.querySelector('.auth-tab[data-tab="login"]').click();
                    showMessage('ËØ∑‰ΩøÁî®Êñ∞Ë¥¶Âè∑ÁôªÂΩï', 'info');
                }, 1500);
            }
            
        } else {
            // Show error message
            showMessage(data.error || 'Ê≥®ÂÜåÂ§±Ë¥•ÔºåËØ∑ÈáçËØï', 'error');
            submitBtn.disabled = false;
            submitBtn.textContent = originalText;
        }
        
    } catch (error) {
        console.error('Registration error:', error);
        showMessage('ÁΩëÁªúÈîôËØØÔºåËØ∑Ê£ÄÊü• Worker ÊòØÂê¶Ê≠£Âú®ËøêË°å', 'error');
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
    }
});

// ============================================
// Helper Functions
// ============================================

/**
 * Show message to user
 */
function showMessage(message, type = 'info') {
    // Remove existing messages
    const existingMsg = document.querySelector('.message-box');
    if (existingMsg) {
        existingMsg.remove();
    }
    
    // Create message box
    const msgBox = document.createElement('div');
    msgBox.className = 'message-box';
    msgBox.textContent = message;
    
    // Style based on type
    const colors = {
        success: '#48BB78',
        error: '#E53E3E',
        info: '#4299E1'
    };
    
    msgBox.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${colors[type] || colors.info};
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        z-index: 10000;
        animation: slideIn 0.3s ease;
        max-width: 300px;
    `;
    
    document.body.appendChild(msgBox);
    
    // Remove after 3 seconds
    setTimeout(() => {
        msgBox.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => msgBox.remove(), 300);
    }, 3000);
}

// ============================================
// UI Enhancements
// ============================================

// Add smooth focus animations
const inputs = document.querySelectorAll('.form-group input, .form-group select');
inputs.forEach(input => {
    input.addEventListener('focus', function() {
        this.parentElement.style.transform = 'translateY(-2px)';
        this.parentElement.style.transition = 'transform 0.3s ease';
    });
    
    input.addEventListener('blur', function() {
        this.parentElement.style.transform = 'translateY(0)';
    });
});

// Check if already logged in
window.addEventListener('load', function() {
    const token = localStorage.getItem('auth_token') || sessionStorage.getItem('auth_token');
    if (token) {
        // Verify token is still valid
        fetch(`${API_ENDPOINT}/api/auth/check`, {
            headers: {
                'Authorization': `Bearer ${token}`
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.authenticated) {
                // Already logged in, redirect to admin
                window.location.href = 'admin.html';
            }
        })
        .catch(error => {
            console.log('Token verification failed:', error);
        });
    }
});

// Add CSS animations
const style = document.createElement('style');
style.textContent = `
    @keyframes slideIn {
        from {
            transform: translateX(400px);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    
    @keyframes slideOut {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(400px);
            opacity: 0;
        }
    }
`;
document.head.appendChild(style);

// ============================================
// Test Users Info (for development)
// ============================================

console.log('üîê JJConnect Authentication System');
console.log('');
console.log('üìã Test Login Accounts:');
console.log('  Admin:  username=admin,  password=admin123');
console.log('  Editor: username=editor, password=editor123');
console.log('  Viewer: username=viewer, password=viewer123');
console.log('');
console.log('‚ú® New User Registration:');
console.log('  - Create a new account with the Register tab');
console.log('  - Choose account type (Viewer or Editor)');
console.log('  - Admin accounts can only be created by existing admins');
console.log('');
console.log('‚öôÔ∏è  API Endpoint:', API_ENDPOINT);
console.log('üí° Make sure Cloudflare Worker is running (wrangler dev)');
</script>
</body>
</html>
